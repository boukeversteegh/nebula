{{#data}}
<div id="dropbox" data-path="{{path}}">
	<button id="mkdir" class="green" onClick="var name = prompt('Please enter a name'); if( name ) { view.xhttp('POST', '/files{{path}}/' + name, {'action':'mkdir'}); }">Create folder</button>
	<button id="rmdir" class="red" onClick="confirm('Are you sure you want to delete this folder?'); view.xhttp('DELETE', '/files{{path}}', null, '/view/files{{parent}}');">Delete folder</button>
	<div class="playlist">
		<div id="folders">
			<ul>
				<li id="breadcrumbs">
					
					{{#breadcrumbs}}<div class="folder" data-path="{{path}}" style="display: inline-block">
						<a class="showview" href="/view/files{{path}}">{{folder}}{{^folder}}/{{/folder}}</a>
					</div>{{/breadcrumbs}}
				</li>
			</ul>
			{{#folders.0}}
			<ul>
				{{#folders}}
				<li class="folder" data-file="{{.}}" data-path="{{path}}/{{.}}">
					<a class="showview" href="/view/files{{path}}/{{.}}">{{.}}</a>
				</li>
				{{/folders}}
			</ul>
			{{/folders.0}}
		</div>
		<div id="files">
			<table border="0" width="100%" cellspacing="0">
				{{#files}}
				<tr class="file" data-file="{{file}}" data-path="{{path}}/{{file}}">
					<td align="right" width="40">{{id3.track_num.0}}</td>
					
					{{#id3.artist}}{{#id3.title}}
						<td><a href="/view/play{{{path}}}/{{{file}}}" class="showview">{{id3.artist}}</a></td>
						<td><a href="/view/play{{{path}}}/{{{file}}}" class="showview">{{id3.title}}</a></td>
						<td><a href="/view/play{{{path}}}/{{{file}}}" class="showview">{{file}}</a></td>
					{{/id3.title}}{{/id3.artist}}
					
					{{! No artist but title available}}
					{{^id3.artist}}
					{{#id3.title}}
						<td><a href="/view/play{{{path}}}/{{{file}}}" class="showview">{{id3.title}}</a></td>
						<td colspan="2"><a href="/view/play{{{path}}}/{{{file}}}" class="showview">{{file}}</a></td>
					{{/id3.title}}
					{{/id3.artist}}
					
					{{! No title but artist available}}
					{{^id3.title}}
					{{#id3.artist}}
						<td><a href="/view/play{{{path}}}/{{{file}}}" class="showview">{{id3.artist}}</a></td>
						<td colspan="2"><a href="/view/play{{{path}}}/{{{file}}}" class="showview">{{file}}</a></td>
					{{/id3.artist}}
					{{/id3.title}}
					
					{{! No artist nor title available}}
					{{^id3.title}}
					{{^id3.artist}}
						<td colspan="3"><a href="/view/play{{{path}}}/{{{file}}}" class="showview">{{file}}</a></td>
					{{/id3.artist}}
					{{/id3.title}}
					<td width="20">
						{{info.durationstr}}
					</td>
					<td width="20">
						<button onClick="confirm('Are you sure you want to delete ' + this.dataset.href + '?') && view.xhttp('DELETE', this.dataset.href)" data-href="/files{{path}}/{{file}}" class="red delete">delete</button></td>
					</td>
				</tr>
				{{/files}}
				{{^files}}
				<tr><td><i>This folder is empty</i></td></tr>
				{{/files}}
			</table>
		</div>
	</div>
	<div class="playlist" id="uploads">
		<h3>Uploads</h3>
		<ul id="uploads_progress"></ul>
	</div>
</div>
{{/data}}

